$("body").on("click",".jsDeleteButton",function(){var reply;return confirm("Are you sure you want to delete?")});var newFormRowIndex=1,menuBoard;$("#user-emails").on("click",".jsAddUser",function(e){e.preventDefault();var $row=$(this).prev(".user-row").clone();$row.find('input:not([type="checkbox"])').val(""),$row.find("input:checked").prop("checked",!1),$row.find('input[name$="[admin]"]').prop("disabled",!1),$row.find('input[name$="[admin]"]').prop("checked",!1);for(var $fields=$row.find("input"),i=$fields.length-1;i>=0;i--){var oldName,newName=$($fields[i]).attr("name").replace(/x?[0-9]+/,"x"+newFormRowIndex);$($fields[i]).attr("name",newName)}newFormRowIndex++,$(this).before($row),$row.find("select[name$='[email]']").focus()}),$(".menu-section").on("click",".add-item-row",function(e){e.preventDefault();var $row=$(this).prev(".menu-item").clone();$row.find('input[name$="[menu_item_id]"]').val(""),$row.find("select").val("default"),$row.find('input[name$="[description]"]').val(""),$row.find('input[name$="[price]"]').val(""),$row.find("input:checked").prop("checked",!1);for(var $fields=$row.find("input, select"),i=$fields.length-1;i>=0;i--){var oldName,newName=$($fields[i]).attr("name").replace(/x?[0-9]+/,"x"+newFormRowIndex);$($fields[i]).attr("name",newName)}newFormRowIndex++,$(this).before($row),$row.find("select[name$='[type]']").focus()}),$(".menu-item-defaults").on("click",".add-item-default-row",function(e){e.preventDefault();var $row=$(this).prev(".item-default").clone();$row.find('input:not([type="checkbox"])').val(""),$row.find("input:checked").prop("checked",!1);for(var $fields=$row.find("input"),i=$fields.length-1;i>=0;i--){var oldName,newName=$($fields[i]).attr("name").replace(/x?[0-9]+/,"x"+newFormRowIndex);$($fields[i]).attr("name",newName)}newFormRowIndex++,$(this).before($row),$row.find("input[name$='[kind]']").focus()}),$(".edit-menu").on("change","select[name$='[type]']",function(){var newKind=$(this).val(),price=priceList[newKind];$(this).parents(".menu-item").find("input[name$='[price]']").val(price)}),$("form input.jsRefNameValidate").on("blur",function(){var elementName=$(this).val();elementName=(elementName=elementName.replace(/[^a-zA-Z0-9_]/g,"_")).toLowerCase(),$(this).val(elementName)}),$(".datepicker").datepicker({dateFormat:"dd-mm-yy"}),function(){"use strict";window.addEventListener("load",function(){var forms=document.getElementsByClassName("validate-form"),validation=Array.prototype.filter.call(forms,function(form){form.addEventListener("submit",function(event){!1===form.checkValidity()&&(event.preventDefault(),event.stopPropagation()),form.classList.add("was-validated")},!1)})},!1)}(),$(".jsOpenMenuBoard").on("click",function(e){e.preventDefault();var url=$(this).prop("href");menuBoard=window.open(url,"menuBoard")});var sellItemOutStates={sellIn:{status:"N",label:"Sell In"},sellOut:{status:"Y",label:"Sell Out"}};$(".jsSellItemInOut").on("click",function(e){e.preventDefault();var $link=$(this),url=$link.prop("href");$.get({url:url,success:function(r){"N"===r.menuItem.sold_out?(newUrl=url.replace(/status=[N,Y]/,"status="+sellItemOutStates.sellOut.status),$link.prop("href",newUrl),$link.text(sellItemOutStates.sellOut.label)):(newUrl=url.replace(/status=[N,Y]/,"status="+sellItemOutStates.sellIn.status),$link.prop("href",newUrl),$link.text(sellItemOutStates.sellIn.label)),menuBoard.location.reload()}})});var supplierPublishedStates={Y:{newFlag:"N",buttonLabel:"Unpublish",buttonClass:"btn-danger"},N:{newFlag:"Y",buttonLabel:"Publish",buttonClass:"btn-success"}};$(".jsPublishSupplier").on("click",function(e){e.preventDefault();var $button=$(this),flag=$button.data("flag"),id=$button.data("id"),publishUrl=$button.data("url");$.get({url:publishUrl+"/"+id+"/"+supplierPublishedStates[flag].newFlag,success:function(r){$button.html(supplierPublishedStates[r.publishedStatus].buttonLabel).data("flag",r.publishedStatus).toggleClass(supplierPublishedStates[flag].buttonClass+" "+supplierPublishedStates[r.publishedStatus].buttonClass)}})});